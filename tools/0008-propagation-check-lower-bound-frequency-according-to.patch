From f458a99c68e6476bf75a951876152ab4a4249398 Mon Sep 17 00:00:00 2001
From: Giovanni Grieco <giovanni.grieco@poliba.it>
Date: Sun, 25 Jun 2023 11:00:52 +0000
Subject: [PATCH 2/3] propagation: check lower-bound frequency according to
 3GPP TR 38.811

---
 .../model/three-gpp-propagation-loss-model.cc    | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

diff --git a/src/propagation/model/three-gpp-propagation-loss-model.cc b/src/propagation/model/three-gpp-propagation-loss-model.cc
index 9d26b6cee..3c31536fb 100644
--- a/src/propagation/model/three-gpp-propagation-loss-model.cc
+++ b/src/propagation/model/three-gpp-propagation-loss-model.cc
@@ -1604,7 +1604,7 @@ ThreeGppNTNDenseUrbanPropagationLossModel::GetLossLos(Ptr<MobilityModel> a,
                                                       Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
 
     double elev_angle = 0;
@@ -1677,7 +1677,7 @@ ThreeGppNTNDenseUrbanPropagationLossModel::GetLossNlos(Ptr<MobilityModel> a,
                                                        Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
 
     double elev_angle = 0;
@@ -1885,7 +1885,7 @@ double
 ThreeGppNTNUrbanPropagationLossModel::GetLossLos(Ptr<MobilityModel> a, Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
 
     double elev_angle = 0;
@@ -1957,7 +1957,7 @@ double
 ThreeGppNTNUrbanPropagationLossModel::GetLossNlos(Ptr<MobilityModel> a, Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
     double elev_angle = 0;
     double distance3D = CalculateDistance(a->GetPosition(), b->GetPosition());
@@ -2170,7 +2170,7 @@ ThreeGppNTNSuburbanPropagationLossModel::GetLossLos(Ptr<MobilityModel> a,
                                                     Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
 
     double elev_angle = 0;
@@ -2244,7 +2244,7 @@ ThreeGppNTNSuburbanPropagationLossModel::GetLossNlos(Ptr<MobilityModel> a,
                                                      Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
     double elev_angle = 0;
     double distance3D = CalculateDistance(a->GetPosition(), b->GetPosition());
@@ -2456,7 +2456,7 @@ double
 ThreeGppNTNRuralPropagationLossModel::GetLossLos(Ptr<MobilityModel> a, Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
 
     double elev_angle = 0;
@@ -2530,7 +2530,7 @@ double
 ThreeGppNTNRuralPropagationLossModel::GetLossNlos(Ptr<MobilityModel> a, Ptr<MobilityModel> b) const
 {
     NS_LOG_FUNCTION(this);
-    NS_ASSERT_MSG(m_frequency <= 100.0e9,
+    NS_ASSERT_MSG(m_frequency >= 0.5e9 && m_frequency <= 100.0e9,
                   "NTN communications are valid for frequencies between 0.5 and 100 GHz.");
     double elev_angle = 0;
     double distance3D = CalculateDistance(a->GetPosition(), b->GetPosition());
-- 
2.42.0

